import http.client
import json

conn = http.client.HTTPSConnection("www.dnb.com")
payload = ''
headers = {
  'authority': 'www.dnb.com',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.106 Safari/537.36',
  'accept': '*/*',
  'sec-gpc': '1',
  'sec-fetch-site': 'same-origin',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  'referer': 'https://www.dnb.com/business-directory/top-results.html?term=marico&page=1',
  'accept-language': 'en-US,en;q=0.9',
  'cookie': 's_ecid=MCMID%7C37049395358995095674307266522422911765; _biz_uid=33df6012d2a74226eb3e058b1094e3c2; _mkto_trk=id:080-UQJ-704&token:_mch-dnb.com-1622915747276-30967; _gcl_au=1.1.1560978736.1622915748; _ga=GA1.2.1303807507.1622915748; __ncuid=bf0817c7-ab34-418f-b319-fa96024b4e7e; tbw_bw_uid=bito.AAMqEk6-LXUAABFMXPVHlQ; _biz_su=33df6012d2a74226eb3e058b1094e3c2; _biz_flagsA=%7B%22Version%22%3A1%2C%22Mkto%22%3A%221%22%2C%22Ecid%22%3A%222073059453%22%2C%22ViewThrough%22%3A%221%22%2C%22XDomain%22%3A%221%22%7D; drift_aid=7900279b-515b-4c70-b149-4ce4adfc0b3e; driftt_aid=7900279b-515b-4c70-b149-4ce4adfc0b3e; _st_bid=5b3c9910-3600-11eb-91d6-1b9d2520d1bd; _bcvm_vrid_2775810355515379163=648726168497627247TDDE1D2875995680C04DE11C85A0816A9C095C2518744ED40F807EA9A019355305252885D9307D05BCA17AE0F57537A26994633A855DC24E359933C2274E890F9; chosen_visitorFrom_cookie_new=DIR; HID=1622915758145; DMCP=1; __gads=ID=2b03c0e9324931cb-22d831bb3cc90020:T=1622915763:RT=1622915763:S=ALNI_MYk95tIgUhpA_x0n-HlHvZi3YR1tw; w_AID=37049395358995095674307266522422911765; _gid=GA1.2.1557553364.1624194537; tbw_bw_sd=1624194539; _sdsat_session_count=3; _sdsat_lt_pages_viewed=7; nc-previous-guid=3ec20415d42476553c25b6c8090e361a; ak_bmsc=629D40ADF0F0E151F9B75BDA2BEB389B~000000000000000000000000000000~YAAQJ40sMQaoTex5AQAAX51VLwwisVT0p5skYNtsA+Nvwa2l4UTRV+lWEX9m/LE65UO9g9KDBXlfKsmWF/dBGdMP6q4qfp6Do2RxqrfFAW7cJ/uKJgd9Kio/Cb4GO4buL6psnE3wZ5wwY9ZICem3fzEe+NnyiLC08EydOVrf40cWRAP1JMZud8TiDv7vnbFFzdSTq+P3YRFaiTyEveJCDP1dEWSkPEuhNkBJ731UsF6fH8nvh1rl1lKDrt8I5nEEz8nBnxU/4iLIM2I8JepGBd70wTihdJfUO8lvT9qty7oKxwbgNlvWOaNbnycVXieSwVxD783YO2OfIfN80ElX/msF6bOiW9cGTdVOOqbsVZ8WC3cEQ962oPOrFMarl/XxdYvxVxRmg7i6n25dOmXEA6Ih1/u0NBkOQyUEkZ7Td9K3oUqXf38C78V3V6KW5OQKgAugxrsf7zb66mCJ0yAUbe2I0EWDmWm/SEwaVulomb2xIteAQg==; SSLB=0; _sp_ses.2291=*; drift_campaign_refresh=c455b386-b0f7-4ab4-851b-de02a0c593fb; _biz_sid=4a2d47; AMCVS_8E4767C25245B0B80A490D4C%40AdobeOrg=1; AMCV_8E4767C25245B0B80A490D4C%40AdobeOrg=-1124106680%7CMCIDTS%7C18799%7CMCMID%7C37049395358995095674307266522422911765%7CMCAAMLH-1624898634%7C12%7CMCAAMB-1624898634%7CRKhpRz8krg2tLO6pguXWp5olkAcUniQYPHaMWWgdJ3xzPWQmdj0y%7CMCOPTOUT-1624301034s%7CNONE%7CMCAID%7CNONE%7CvVersion%7C5.2.0; s_cc=true; s_sq=%5B%5BB%5D%5D; integrated_search_query=adani%20green%20energy%20four%20ltd; QSI_HistorySession=https%3A%2F%2Fwww.dnb.com%2Fbusiness-directory%2Ftop-results.html%3Fterm%3Dadani%2520green%2520energy%2520pte%2520ltd%2520ageptel%26page%3D1~1624294014787%7Chttps%3A%2F%2Fwww.dnb.com%2Fbusiness-directory%2Ftop-results.html%3Fterm%3Dadani%2520green%2520energy%2520four%2520ltd%26page%3D1~1624294087353; _gat_ncAudienceInsightsGa=1; _dc_gtm_UA-18184345-1=1; _gat_UA-19892859-28=1; s_nr30=1624294190109-Repeat; _sp_id.2291=c41f887b-77b0-4083-a5b2-f7fa2eda0c38.1622915750.11.1624294190.1624291876.b91a5456-85dd-4804-bed2-f33e41868064; AWSALB=PWm7KMIKvzbxWP0kGNSJfSSGxj3JpF3h+Se9UTZ03iIsVg/kpr2qNgKGL7hTeq8djgdfVIv9flxLamocsP7HbQ+eZRVUXzNUioSoXeF6uYE/G+7UJhND655iP5/8; AWSALBCORS=PWm7KMIKvzbxWP0kGNSJfSSGxj3JpF3h+Se9UTZ03iIsVg/kpr2qNgKGL7hTeq8djgdfVIv9flxLamocsP7HbQ+eZRVUXzNUioSoXeF6uYE/G+7UJhND655iP5/8; _biz_nA=40; _biz_pendingA=%5B%5D; _st_l=35.600|8662583217,8552622918,,+18552622918,0,1624294676.8005269018,8442386893,,+18442386893,0,1624198048.8664733932,8442184318,,+18442184318,0,1624294823|4715123188.2484894700.42973068963.1397179421.2940598144.1473740821.43426123819.6543672680.4715212207.4235603609.4463568225.1731177237.4715144250.1604667920; _st=5b3c9910-3600-11eb-91d6-1b9d2520d1bd.2d266230-ce5e-11eb-b08f-1f0773e28a10....0....1624294823.1624304993.600.10800.30.0....1....1.10,11..dnb^com.UA-18184345-1.1303807507^1622915748.35.; bm_sv=2756865DD8F89B06FA01B8758CCD2BF1~1uygBY7MgupR0SmFxX9VYlvVf7jIVYyvkJDp5O+4aF8TVgxti9pdjBcUZEYIWxblaco7PdGWPvN7pk00vvx9h3IPdRsV2E4tmiHDEM0g6Wlx8O/kUCi5x/eQgQxwn2JWVFB4OB54GwVErJ/47XR96w==; RT="z=1&dm=www.dnb.com&si=4ef5d082-338c-46ba-a9ad-54fb76b34225&ss=kq6uls1i&sl=7&tt=nav&obo=2&rl=1'
}
# for i in range(15):
conn.request("GET", "/apps/dnb/thirdparty/dnbdirectutil?limited=false&captchaDone=true&pageSize=5&pageNumber=1&criteriasearch=true&searchTerm=adani%20green%20energy%20pte%20ltd%20ageptel", payload, headers)
res = conn.getresponse()
data = res.read()
first_comp=json.loads(data.decode("utf-8"))["searchCandidates"][0]["organization"]
print(first_comp)
base_link="https://www.dnb.com/business-directory/company-profiles."
link=base_link+first_comp["primaryNameForUrl"]+"."+first_comp["duns"]+".html"
print(link)